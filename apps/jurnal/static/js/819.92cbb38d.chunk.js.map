{"version":3,"file":"static/js/819.92cbb38d.chunk.js","mappings":"qLAEO,IAiCIA,EAAaC,UAAwC,IAAjC,OAAEC,EAAM,MAAEC,EAAK,SAAEC,GAAUC,EAEtDC,QAAQC,IAAIL,EAAQC,EAAOC,GAE3B,IAAII,EAAO,CACPN,OAAQA,EACRC,MAAOA,EACPC,SAAUA,GAGdE,QAAQC,IAAIE,KAAKC,UAAUF,IAE3B,IAAIG,QAAYC,MAAMC,EAAAA,EAAO,QAAS,CAClCC,OAAQ,MACRC,QAAS,CACL,eAAgB,mBAChB,cAAiBC,aAAaC,QAAQ,UAAY,IAEtDT,KAAMC,KAAKC,UAAUF,KAGzB,OAAQG,EAAIO,GAA2BP,EAAIQ,OAA1B,CAAEC,OAAQ,QAAsB,E,qBC/CtC,SAASC,IACpB,MAAM,KAAEC,EAAI,QAAEC,IAAYC,EAAAA,EAAAA,MACXC,EAAAA,EAAAA,MAAf,IAEI,OAAEC,EAAM,UAAEC,EAAS,QAAEC,IAAYC,EAAAA,EAAAA,aAAY,CAC7CC,WAAaC,GAAS/B,EAAW+B,KAYrC,OACIC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,UAASC,SAAA,CAEnBN,GAAUO,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gCAA+BC,SAAC,sGAA2B,KACrFP,GAAYQ,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kCAAiCC,SAAC,6DAA0B,MAEzFF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,gBAAgBG,SAfnBC,IACjBA,EAAEC,iBACFZ,EAAO,CACHxB,OAAQoB,EAAKpB,OACbC,MAAOkC,EAAEE,OAAOpC,MAAMqC,MACtBpC,SAAUiC,EAAEE,OAAOnC,SAASoC,OAC9B,EAS0DN,SAAA,EACpDC,EAAAA,EAAAA,KAAA,SACIF,UAAU,uCACVQ,YAAY,gEACZC,aAAcpB,EAAKnB,MACnBwC,KAAK,OACLC,KAAK,QACLC,GAAG,gBACHC,aAAa,WACbC,WAAW,KAGfZ,EAAAA,EAAAA,KAAA,SACIF,UAAU,0CACVQ,YAAY,sEACZE,KAAK,WACLC,KAAK,WACLC,GAAG,mBACHC,aAAa,kBAEjBX,EAAAA,EAAAA,KAAA,UAAQF,UAAU,kBAAiBC,UAACC,EAAAA,EAAAA,KAAA,QAAAD,SAAM,sDAK1D,C","sources":["services/auth.service.js","pages/AdminProfile/AdminProfile.jsx"],"sourcesContent":["import { BASE } from \"./vars.js\";\r\n\r\nexport let auth = async ({ login, password }) => {\r\n\r\n    let body = {\r\n        \"login\": login,\r\n        \"password\": password\r\n    }\r\n\r\n    let res = await fetch(`${BASE}/auth`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(body)\r\n    });\r\n\r\n    return !res.ok ? { status: \"error\" } : res.json();\r\n\r\n}\r\n\r\nexport let authCheck = async () => {\r\n\r\n    let res = await fetch(`${BASE}/check`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": localStorage.getItem(\"token\") || \"\"\r\n        }\r\n    });\r\n\r\n    return !res.ok ? { status: \"error\" } : res.json();\r\n\r\n}\r\n\r\nexport let authUpdate = async ({ userID, login, password }) => {\r\n\r\n    console.log(userID, login, password);\r\n\r\n    let body = {\r\n        userID: userID,\r\n        login: login,\r\n        password: password\r\n    }\r\n\r\n    console.log(JSON.stringify(body));\r\n\r\n    let res = await fetch(BASE + \"/user\", {\r\n        method: \"PUT\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": localStorage.getItem(\"token\") || \"\"\r\n        },\r\n        body: JSON.stringify(body)\r\n    });\r\n\r\n    return !res.ok ? { status: \"error\" } : res.json();\r\n\r\n}","import \"./AdminProfile.css\";\r\n\r\nimport React from \"react\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useMutation } from \"react-query\";\r\nimport { authUpdate } from \"../../services/auth.service\";\r\nimport {ReactComponent as LogoutIcon} from \"../../pic/logout_icon.svg\";\r\n\r\nexport default function AdminProfile() {\r\n    const { user, signout } = useAuth();\r\n    let navigate = useNavigate();\r\n\r\n    let { mutate, isLoading, isError } = useMutation({\r\n        mutationFn: (data) => authUpdate(data),\r\n    });\r\n\r\n    let handlerSubmit = (e) => {\r\n        e.preventDefault();\r\n        mutate({\r\n            userID: user.userID,\r\n            login: e.target.login.value,\r\n            password: e.target.password.value,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"profile\">\r\n\r\n            {isError ? <span className=\"profile__alert profile__error\">ошибка обновления</span> : null}\r\n            {isLoading ? <span className=\"profile__alert profile__loading\">... загрузка ...</span> : null}\r\n\r\n            <form className=\"profile__form\" onSubmit={handlerSubmit}>\r\n                <input\r\n                    className=\"profile__input profile__input--login\"\r\n                    placeholder=\"Новый логин\"\r\n                    defaultValue={user.login}\r\n                    type=\"text\"\r\n                    name=\"login\"\r\n                    id=\"profile_login\"\r\n                    autoComplete=\"username\"\r\n                    autoFocus={true}\r\n                />\r\n\r\n                <input\r\n                    className=\"profile__input profile__input--password\"\r\n                    placeholder=\"Новый пароль\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    id=\"profile_password\"\r\n                    autoComplete=\"new-password\"\r\n                />\r\n                <button className=\"profile__change\"><span>Сменить</span></button>\r\n            </form>\r\n\r\n        </div>\r\n    );\r\n}\r\n"],"names":["authUpdate","async","userID","login","password","_ref2","console","log","body","JSON","stringify","res","fetch","BASE","method","headers","localStorage","getItem","ok","json","status","AdminProfile","user","signout","useAuth","useNavigate","mutate","isLoading","isError","useMutation","mutationFn","data","_jsxs","className","children","_jsx","onSubmit","e","preventDefault","target","value","placeholder","defaultValue","type","name","id","autoComplete","autoFocus"],"sourceRoot":""}